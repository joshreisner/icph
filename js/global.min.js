// object literal for timeline sliding and jumping
var timeline={$timeline:jQuery("#timeline ul"),$slider_eras:jQuery("ul#slider li"),interval:!1,increment:0,slider_start:!1,slider_end:!1,eras:["early_ny","nineteenth","progressive","great_depression","today"],positions:[],init:function(){for(var e=0;e<this.eras.length;e++)this.positions[this.eras[e]]=jQuery("#timeline li#"+this.eras[e]).position().left;this.slider_start=this.$slider_eras.first().position().left;this.slider_end=0-this.positions.today+this.slider_start;this.jump("progressive");this.$slider_eras.click(function(){var e=jQuery(this).attr("class");e=e.replace(" first","").replace(" last","").replace(" active","");timeline.jump(e)});jQuery("#timeline div.arrow").hover(function(){timeline.increment=jQuery(this).hasClass("left")?7:-7;timeline.interval=setInterval(timeline.move,10)},function(){clearInterval(timeline.interval)})},jump:function(e){this.$timeline.css("marginLeft",0-(this.positions[e]-this.slider_start)+"px");this.update()},move:function(){var e=parseInt(timeline.$timeline.css("marginLeft"),10)+timeline.increment;e>timeline.slider_start&&(e=timeline.slider_start);e<timeline.slider_end&&(e=timeline.slider_end);timeline.$timeline.css({marginLeft:e});timeline.update()},update:function(){var e=0-parseInt(this.$timeline.css("marginLeft"),10)+this.slider_start,t=parseInt(this.$timeline.css("marginLeft"),10),n=this.eras[0];for(var r=0;r<this.eras.length;r++)this.positions[this.eras[r]]<=e&&(n=this.eras[r]);this.$slider_eras.removeClass("active");jQuery("ul#slider li."+n).addClass("active");if(e===0){jQuery("#timeline div.arrow.left").hide();clearInterval(timeline.interval)}else jQuery("#timeline div.arrow.left").is(":hidden")&&jQuery("#timeline div.arrow.left").show();if(t===timeline.slider_end){jQuery("#timeline div.arrow.right").hide();clearInterval(timeline.interval)}else jQuery("#timeline div.arrow.right").is(":hidden")&&jQuery("#timeline div.arrow.right").show()}},overlay={show:function(e){if(e==="#")return this.hide();jQuery.ajax({url:"/"+e.substr(1)+"/?overlay=true",success:function(e){overlay.hide();jQuery("body").append(e)},error:function(){location.href="/"}})},hide:function(){jQuery("div#overlay_backdrop").remove();jQuery("div#overlay").remove()}};jQuery(function(){typeof console=="undefined"&&(window.console={log:function(){}});location.hash&&location.hash!=="#contact"&&overlay.show(location.hash);jQuery("a").live("click",function(){var e=jQuery(this).attr("href");e.substr(0,1)==="#"&&overlay.show(e)});jQuery("li.search").hover(function(){jQuery(this).find("input").first().focus()});jQuery("body").hasClass("timeline")&&timeline.init();jQuery("#browse h3").live("click",function(){jQuery(this).parent().find("ul").slideToggle();var e=jQuery(this).find("i").first();e.hasClass("icon-plus-sign")?e.removeClass("icon-plus-sign").addClass("icon-minus-sign"):e.removeClass("icon-minus-sign").addClass("icon-plus-sign")});jQuery("#browse .header a").click(function(){jQuery("#browse .header a").removeClass("active");jQuery(this).addClass("active");var e=jQuery(this).html().toLowerCase();jQuery.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:"action=browse&type="+e,success:function(e){jQuery("#browse .content").html(e)}})})});